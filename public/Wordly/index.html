<!DOCTYPE html>
<html>
<head>
  <title>Word Guesser</title>
  <meta name="viewport" content="width=device-width, initial-scale=0.75, user-scalable=no">
  <style>
    :root {
      /* Light theme colors */
      --bg-color: #fafafa;
      --text-color: #1a1a1b;
      --subtitle-color: #787c7e;
      --tile-border: #d3d6da;
      --tile-active: #878a8c;
      --container-bg: white;
      --container-shadow: rgba(0, 0, 0, 0.1);
      --modal-bg: rgba(0, 0, 0, 0.5);
      --modal-content-bg: white;
    }

    [data-theme="dark"] {
      /* Dark theme colors */
      --bg-color: #121213;
      --text-color: #ffffff;
      --subtitle-color: #9b9b9b;
      --tile-border: #3a3a3c;
      --tile-active: #565758;
      --container-bg: #1a1a1b;
      --container-shadow: rgba(255, 255, 255, 0.05);
      --modal-bg: rgba(255, 255, 255, 0.1);
      --modal-content-bg: #1a1a1b;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
    }

    #hidden-input {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 80%;
      height: 40px;
      opacity: 0;
      z-index: 100;
      font-size: 16px;
    }

    body {
      font-family: 'Helvetica Neue', Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      background-color: var(--bg-color);
      color: var(--text-color) !important;
      padding: 10px;
    }

    .header {
      width: 100%;
      max-width: 500px;
      display: flex;
      justify-content: flex-end;
      align-items: center;
      margin-bottom: 10px;
      padding-right: 10px;
    }

    .theme-switch-wrapper {
      display: flex;
      align-items: center;
    }

    .theme-switch {
      display: inline-block;
      height: 24px;
      position: relative;
      width: 44px;
    }

    .theme-switch input {
      display: none;
    }

    .slider {
      background-color: #ffffff;
      bottom: 0;
      cursor: pointer;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
      transition: .4s;
      border-radius: 34px;
      border: 1px solid #e0e0e0;
    }

    .slider:before {
      background-color: transparent;
      bottom: 3px;
      content: "";
      height: 18px;
      width: 18px;
      left: 3px;
      position: absolute;
      transition: .4s;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23000000'%3E%3Cpath d='M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.166a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.591-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.834 18.894a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75V21a.75.75 0 01-1.5 0v-2.25A.75.75 0 0112 18zM7.758 17.303a.75.75 0 00-1.061-1.06l-1.591 1.59a.75.75 0 001.06 1.061l1.591-1.59zM6 12a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h2.25A.75.75 0 016 12zM6.697 7.757a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 00-1.061 1.06l1.59 1.591z'/%3E%3C/svg%3E");
      background-size: cover;
    }

    input:checked + .slider {
      background-color: #121213;
    }

    input:checked + .slider:before {
      transform: translateX(20px);
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23ffffff'%3E%3Cpath d='M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z'/%3E%3C/svg%3E");
    }

    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      width: 100%;
      max-width: 500px;
      text-align: center;
      margin-bottom: 10px;
    }

    .title {
      font-size: 2rem;
      font-weight: 700;
      letter-spacing: 0.2rem;
      margin-bottom: 5px;
      color: var(--text-color) !important;
      text-transform: uppercase;
    }

    .subtitle {
      font-size: 0.9rem;
      color: var(--subtitle-color);
      margin-bottom: 15px;
      font-weight: 500;
    }

    .game-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
      max-width: 350px;
      background-color: var(--container-bg);
      padding: 15px;
      border-radius: 12px;
      box-shadow: 0 4px 20px var(--container-shadow);
      margin-bottom: 10px;
    }

    .board {
      display: grid;
      grid-template-rows: repeat(6, 1fr);
      grid-gap: 6px;
      margin-bottom: 24px;
      width: 100%;
    }

    .row {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      grid-gap: 6px;
      width: 100%;
    }

    .tile {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
      aspect-ratio: 1;
      border: 2px solid var(--tile-border);
      border-radius: 4px;
      font-size: 2rem;
      font-weight: bold;
      text-transform: uppercase;
      transition: all 0.2s;
      color: var(--text-color);
    }

    .tile.active {
      border-color: var(--tile-active);
      border-width: 2px;
      animation: blink 1s infinite;
    }

    @keyframes blink {
      0%, 100% { border-color: var(--tile-active); }
      50% { border-color: var(--tile-border); }
    }

    .correct {
      background-color: #6aaa64;
      color: white;
      border-color: #6aaa64;
      transform: rotateX(360deg);
      transition: transform 0.6s;
    }

    .present {
      background-color: #c9b458;
      color: white;
      border-color: #c9b458;
      transform: rotateX(360deg);
      transition: transform 0.6s;
    }

    .absent {
      background-color: #787c7e;
      color: white;
      border-color: #787c7e;
      transform: rotateX(360deg);
      transition: transform 0.6s;
    }

    .message {
      margin: 16px 0;
      font-weight: bold;
      min-height: 28px;
      text-align: center;
      font-size: 1.2rem;
      color: var(--text-color) !important;
    }

    .status {
      margin-top: 10px;
      text-align: center;
      font-size: 1rem;
      color: var(--subtitle-color);
      font-weight: 500;
    }

    .instructions {
      margin-top: 10px;
      text-align: center;
      max-width: 400px;
      padding: 15px;
      font-size: 0.9rem;
      line-height: 1.5;
      background-color: var(--container-bg);
      border-radius: 12px;
      box-shadow: 0 4px 20px var(--container-shadow);
      color: var(--text-color);
    }

    .instructions p {
      margin-bottom: 12px;
    }

    .instructions p:last-child {
      margin-bottom: 0;
    }

    .color-example {
      display: flex;
      justify-content: center;
      gap: 16px;
      margin-top: 16px;
    }

    .example-text {
      display: flex;
      align-items: center;
      font-size: 0.9rem;
      color: var(--text-color);
    }

    .example-tile {
      width: 24px;
      height: 24px;
      border-radius: 4px;
      display: inline-block;
      margin-right: 8px;
      vertical-align: middle;
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: var(--modal-bg);
      justify-content: center;
      align-items: center;
      z-index: 100;
    }

    .modal-content {
      background-color: var(--modal-content-bg);
      padding: 30px;
      border-radius: 12px;
      max-width: 400px;
      width: 90%;
      text-align: center;
      box-shadow: 0 4px 20px var(--container-shadow);
      color: var(--text-color);
    }
    .modal-title {
      font-size: 1.5rem;
      margin-bottom: 15px;
      font-weight: bold;
    }

    .modal-text {
      margin-bottom: 20px;
      line-height: 1.5;
    }

    .button-container {
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: center;
    }

    .button {
      background-color: #6aaa64;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 30px;
      font-weight: bold;
      cursor: pointer;
      font-size: 1rem;
      margin-top: 5px;
      transition: background-color 0.2s;
      width: 100%;
      max-width: 300px;
    }

    .button:hover {
      background-color: #5c9658;
    }

    .button.secondary {
      background-color: #3498db;
    }

    .button.secondary:hover {
      background-color: #2980b9;
    }

    .mode-indicator {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 0.8rem;
      font-weight: bold;
      margin-left: 8px;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .mode-indicator.daily {
      background-color: #2d9324;
      color: white !important;
    }

    .mode-indicator.daily:hover {
      background-color: #5c9658;
    }

    .mode-indicator.random {
      background-color: #3498db;
      color: white !important;
    }

    .mode-indicator.random:hover {
      background-color: #2980b9;
    }
    @media (max-width: 768px) {
      .game-container, .instructions {
        margin-bottom: 10px;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="theme-switch-wrapper">
      <label class="theme-switch">
        <input type="checkbox" id="theme-toggle">
        <span class="slider"></span>
      </label>
    </div>
  </div>

  <div class="container">
    <div class="title">Word Guesser</div>
    <div class="subtitle">
      <span id="mode-text">Daily Challenge</span>
      <span class="mode-indicator daily" id="mode-indicator">DAILY</span>
    </div>
    <div class="game-container">
      <div class="board" id="board"></div>
      <div class="message" id="message"></div>
      <div class="status" id="status"></div>
    </div>

    <input type="text" id="hidden-input" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" inputmode="text">

    <div class="instructions">
      <p>Guess the WORD in 6 tries.</p>
      <p>Each guess must be a valid 5-letter word. Use your phone's keyboard to type and press enter to submit.</p>
      <p>After each guess, the color of the tiles will change to show how close your guess was to the word.</p>

      <div class="color-example">
        <div class="example-text">
          <span class="example-tile" style="background-color: #6aaa64;"></span>
          Correct
        </div>
        <div class="example-text">
          <span class="example-tile" style="background-color: #c9b458;"></span>
          Present
        </div>
        <div class="example-text">
          <span class="example-tile" style="background-color: #787c7e;"></span>
          Absent
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="tutorial-modal">
    <div class="modal-content">
      <div class="modal-title">How to Play Word Guesser</div>
      <div class="modal-text">
        <p>Welcome to Word Guesser! Here's how to play:</p>
        <ol style="text-align: left; margin: 15px 0; padding-left: 20px;">
          <li>Guess the WORD in 6 tries.</li>
          <li>Each guess must be a valid 5-letter word.</li>
          <li>After each guess, the tiles will change color to show how close you were:</li>
        </ol>
        <div class="color-example" style="margin-bottom: 15px;">
          <div class="example-text">
            <span class="example-tile" style="background-color: #6aaa64;"></span>
            Green = Correct letter and position
          </div>
        </div>
        <div class="color-example" style="margin-bottom: 15px;">
          <div class="example-text">
            <span class="example-tile" style="background-color: #c9b458;"></span>
            Yellow = Letter exists but wrong position
          </div>
        </div>
        <div class="color-example" style="margin-bottom: 15px;">
          <div class="example-text">
            <span class="example-tile" style="background-color: #787c7e;"></span>
            Gray = Letter not in the word
          </div>
        </div>
        <p>You can play in two modes:</p>
        <ul style="text-align: left; margin: 15px 0; padding-left: 20px;">
          <li><strong>Daily Challenge:</strong> Same word for everyone each day</li>
          <li><strong>Random Mode:</strong> Play as many times as you want</li>
        </ul>
      </div>
      <div class="button-container">
        <button class="button" id="start-playing">Start Playing!</button>
      </div>
    </div>
  </div>

  <div class="modal" id="win-modal">
    <div class="modal-content">
      <div class="modal-title">Congratulations!</div>
      <div class="modal-text" id="win-message">
        You've completed today's daily word!
        Would you like to continue playing with random words?
      </div>
      <div class="button-container">
        <button class="button" id="continue-button">Continue with Random Words</button>
        <button class="button secondary" id="play-again-button" style="display: none;">Play Again</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script>
    // Theme switching functionality
    const themeToggle = document.getElementById('theme-toggle');

    // Check for saved theme preference
    const savedTheme = localStorage.getItem('theme') || 'light';
    document.documentElement.setAttribute('data-theme', savedTheme);
    themeToggle.checked = savedTheme === 'dark';

    // Handle theme switch
    themeToggle.addEventListener('change', function() {
      const theme = this.checked ? 'dark' : 'light';
      document.documentElement.setAttribute('data-theme', theme);
      localStorage.setItem('theme', theme);
    });

    // Check if it's the first visit
    const isFirstVisit = !localStorage.getItem('hasVisitedBefore');

    // Show tutorial modal on first visit
    if (isFirstVisit) {
      const tutorialModal = document.getElementById('tutorial-modal');
      tutorialModal.style.display = 'flex';

      // Close tutorial and start playing
      document.getElementById('start-playing').addEventListener('click', () => {
        tutorialModal.style.display = 'none';
        localStorage.setItem('hasVisitedBefore', 'true');
      });
    }

    // Game functionality
    const words = ["ABACK"];

    let currentRow = 0;
    let currentTile = 0;
    let gameOver = false;
    let dailyMode = true;
    let word = '';

    function initializeBoard() {
      const board = document.getElementById('board');
      board.innerHTML = '';
      for (let i = 0; i < 6; i++) {
        const row = document.createElement('div');
        row.className = 'row';
        for (let j = 0; j < 5; j++) {
          const tile = document.createElement('div');
          tile.className = 'tile';
          row.appendChild(tile);
        }
        board.appendChild(row);
      }
      updateActiveTile();
      focusInput();
    }

    function focusInput() {
      const hiddenInput = document.getElementById('hidden-input');
      hiddenInput.focus();
      window.scrollTo(0, 0);
    }

    function updateActiveTile() {
      const tiles = document.querySelectorAll('.tile');
      tiles.forEach(tile => tile.classList.remove('active'));
      if (currentRow < 6 && currentTile < 5) {
        tiles[currentRow * 5 + currentTile].classList.add('active');
      }
    }

    function handleKeyPress(key) {
      if (gameOver) return;

      if (/^[A-Za-z]$/.test(key)) {
        if (currentTile < 5) {
          const tiles = document.querySelectorAll('.tile');
          tiles[currentRow * 5 + currentTile].textContent = key.toUpperCase();
          currentTile++;
          updateActiveTile();
        }
      } else if (key === 'Backspace' && currentTile > 0) {
        currentTile--;
        const tiles = document.querySelectorAll('.tile');
        tiles[currentRow * 5 + currentTile].textContent = '';
        updateActiveTile();
      } else if (key === 'Enter' && currentTile === 5) {
        submitGuess();
      }
    }

    function submitGuess() {
      const row = document.querySelector(`.row:nth-child(${currentRow + 1})`);
      const tiles = row.querySelectorAll('.tile');
      const guess = Array.from(tiles).map(tile => tile.textContent).join('');

      if (!words.includes(guess)) {
        showMessage('Not in word list');
        return;
      }

      const result = checkGuess(guess);
      animateResult(result, tiles);

      if (result.every(r => r === 'correct')) {
        gameOver = true;
        showWinAnimation();
        setTimeout(() => {
          showWinModal();
        }, 1500);
      } else if (currentRow === 5) {
        gameOver = true;
        showMessage(`Game Over! The word was ${word}`);
      } else {
        currentRow++;
        currentTile = 0;
        updateActiveTile();
      }
    }

    function showWinAnimation() {
      if (window.innerWidth < 768) {
        confetti({
          particleCount: 100,
          spread: 70,
          origin: { y: 0.6, x: 0.5 },
          colors: ['#6aaa64', '#c9b458', '#787c7e']
        });
      } else {
        const end = Date.now() + 1000;
        const colors = ['#6aaa64', '#c9b458', '#787c7e'];

        (function frame() {
          confetti({
            particleCount: 3,
            angle: 45,
            spread: 30,
            origin: { x: 0, y: 0.8 },
            colors: colors,
            gravity: 1,
            scalar: 1.2
          });

          confetti({
            particleCount: 3,
            angle: 135,
            spread: 30,
            origin: { x: 1, y: 0.8 },
            colors: colors,
            gravity: 1,
            scalar: 1.2
          });

          if (Date.now() < end) {
            requestAnimationFrame(frame);
          }
        }());
      }
    }

    function checkGuess(guess) {
      const result = Array(5).fill('absent');
      const letterCount = {};

      for (let letter of word) {
        letterCount[letter] = (letterCount[letter] || 0) + 1;
      }

      for (let i = 0; i < 5; i++) {
        if (guess[i] === word[i]) {
          result[i] = 'correct';
          letterCount[guess[i]]--;
        }
      }

      for (let i = 0; i < 5; i++) {
        if (result[i] !== 'correct' && letterCount[guess[i]] > 0) {
          result[i] = 'present';
          letterCount[guess[i]]--;
        }
      }

      return result;
    }

    function animateResult(result, tiles) {
      tiles.forEach((tile, index) => {
        setTimeout(() => {
          tile.className = `tile ${result[index]}`;
        }, index * 100);
      });
    }

    function showMessage(text) {
      const message = document.getElementById('message');
      message.textContent = text;
      setTimeout(() => {
        message.textContent = '';
      }, 2000);
    }

    function showWinModal() {
      const modal = document.getElementById('win-modal');
      const winMessage = document.getElementById('win-message');
      const continueButton = document.getElementById('continue-button');
      const playAgainButton = document.getElementById('play-again-button');

      if (dailyMode) {
        winMessage.textContent = "Congratulations! You've completed today's daily word! Would you like to continue playing with random words?";
        continueButton.style.display = 'block';
        playAgainButton.style.display = 'none';
      } else {
        winMessage.textContent = "Congratulations! You found the word!";
        continueButton.style.display = 'none';
        playAgainButton.style.display = 'block';
      }

      modal.style.display = 'flex';
    }

    function getRandomWord() {
      return words[Math.floor(Math.random() * words.length)];
    }

    function getDailyWord() {
      const date = new Date();
      const seed = date.getFullYear() * 10000 + (date.getMonth() + 1) * 100 + date.getDate();
      const dailyIndex = seed % words.length;
      return words[dailyIndex];
    }

    function resetGame() {
      currentRow = 0;
      currentTile = 0;
      gameOver = false;
      word = dailyMode ? getDailyWord() : getRandomWord();
      initializeBoard();
      updateModeIndicator();
    }

    function updateModeIndicator() {
      const modeIndicator = document.getElementById('mode-indicator');
      modeIndicator.classList.remove('daily', 'random');
      modeIndicator.classList.add(dailyMode ? 'daily' : 'random');
      modeIndicator.textContent = dailyMode ? 'DAILY' : 'RANDOM';
      document.getElementById('mode-text').textContent = dailyMode ? 'Daily Challenge' : 'Random Words';
    }

    document.addEventListener('click', focusInput);
    document.addEventListener('touchstart', focusInput);
    document.addEventListener('dblclick', (e) => {
      e.preventDefault();
    });

    const hiddenInput = document.getElementById('hidden-input');
    hiddenInput.addEventListener('input', (e) => {
      const value = e.target.value.toUpperCase();
      if (value && /^[A-Z]$/.test(value)) {
        handleKeyPress(value);
      }
      hiddenInput.value = '';
    });

    hiddenInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === 'Backspace') {
        e.preventDefault();
        handleKeyPress(e.key);
      }
    });

    document.getElementById('continue-button').addEventListener('click', () => {
      dailyMode = false;
      document.getElementById('mode-text').textContent = 'Random Words';
      document.getElementById('mode-indicator').textContent = 'RANDOM';
      const modal = document.getElementById('win-modal');
      modal.style.display = 'none';
      resetGame();
    });

    document.getElementById('play-again-button').addEventListener('click', () => {
      const modal = document.getElementById('win-modal');
      modal.style.display = 'none';
      resetGame();
    });

    document.getElementById('mode-indicator').addEventListener('click', () => {
      if (!gameOver) {
        dailyMode = !dailyMode;
        updateModeIndicator();
        resetGame();
      }
    });

    word = dailyMode ? getDailyWord() : getRandomWord();
    initializeBoard();
    updateModeIndicator();
  </script>
</body>
</html>